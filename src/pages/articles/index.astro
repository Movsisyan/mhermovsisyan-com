---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const allArticles = await getCollection("articles", ({ data }) => !data.draft);
const sortedArticles = allArticles.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="Writings â€” Mher Movsisyan">
  <!-- Mesh Background -->
  <div class="grid-overlay"></div>

  <div class="quantum-layout">
    <!-- Navigation Rail -->
    <nav class="nav-rail">
      <a
        href="/"
        class="brand-monogram"
        style="text-decoration: none; color: black;">M</a
      >

      <div class="nav-links">
        <a href="/#logs" class="nav-item" data-label="Return"></a>
      </div>
    </nav>

    <main class="content-stream" style="padding-top: 120px;">
      <div class="subtitle-mono">Thoughts</div>
      <h1
        class="glitch-text"
        data-text="Writings"
        style="font-size: clamp(3rem, 6vw, 5rem); margin-bottom: 60px;"
      >
        Writings
      </h1>

      <div class="logs-list">
        {
          sortedArticles.map((article, index) => (
            <a
              href={`/articles/${article.slug}`}
              class="log-entry"
              style="padding: 40px 0;"
            >
              <div style="flex: 1;">
                <div style="font-family: var(--font-data); color: var(--color-cyan); font-size: 12px; margin-bottom: 8px;">
                  //{article.data.category.toUpperCase()}
                </div>
                <h2
                  class="log-title"
                  style="font-size: 32px; margin-bottom: 12px;"
                >
                  {article.data.title}
                </h2>
                <p style="color: #888; max-width: 600px; line-height: 1.6;">
                  {article.data.description}
                </p>
              </div>

              <div style="text-align: right; font-family: var(--font-data); color: #444; font-size: 12px;">
                TIMESTAMP
                <br />
                <span style="color: var(--text-muted);">
                  {article.data.pubDate.toISOString().split("T")[0]}
                </span>
              </div>
            </a>
          ))
        }
      </div>
    </main>
  </div>
</BaseLayout>

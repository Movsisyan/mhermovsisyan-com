---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allArticles = await getCollection('articles', ({ data }) => !data.draft);
const sortedArticles = allArticles.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="Writing â€” Mher Movsisyan">
  <!-- Header -->
  <header class="header">
    <div class="container header-inner">
      <a href="/" class="logo">Mher Movsisyan</a>
      <nav class="nav">
        <a href="/#expertise" class="nav-link">Expertise</a>
        <a href="/#work" class="nav-link">Work</a>
        <a href="/articles" class="nav-link">Writing</a>
        <a href="/#contact" class="nav-cta">Get in touch</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <a href="/" class="back-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Home
      </a>
      
      <div class="section-header" style="margin-bottom: 0;">
        <span class="section-eyebrow">Ideas & Insights</span>
        <h1 class="section-title">Writing</h1>
      </div>
    </div>

    <div class="articles-list">
      {sortedArticles.map((article) => (
        <a href={`/articles/${article.slug}`} class="article-row">
          <div class="article-info">
            <span class="article-category">{article.data.category}</span>
            <h2 class="article-title">{article.data.title}</h2>
            <p class="article-desc">{article.data.description}</p>
          </div>
          <time class="article-date">
            {article.data.pubDate.toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'short', 
              day: 'numeric' 
            })}
          </time>
        </a>
      ))}
    </div>
  </main>
</BaseLayout>
